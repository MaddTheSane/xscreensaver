# hacks/glx/Makefile.in --- xscreensaver, Copyright (c) 1997 Jamie Zawinski.
# the `../../configure' script generates `hacks/glx/Makefile' from this file.

@SET_MAKE@
.SUFFIXES:
.SUFFIXES: .c .o

srcdir		= @srcdir@
VPATH		= @srcdir@

install_prefix	=
prefix		= @prefix@
exec_prefix	= @exec_prefix@
bindir		= @bindir@
mandir		= @mandir@
man1dir		= $(mandir)/man1
mansuffix	= 1

CC		= @CC@
CFLAGS		= @CFLAGS@
LDFLAGS		= @LDFLAGS@
DEFS		= -DSTANDALONE -DUSE_GL @DEFS@
LIBS		= @LIBS@

DEPEND		= @DEPEND@
DEPEND_FLAGS	= @DEPEND_FLAGS@
DEPEND_DEFINES	= @DEPEND_DEFINES@

SHELL		= /bin/sh
INSTALL		= @INSTALL@
INSTALL_PROGRAM = @INSTALL_PROGRAM@
INSTALL_DATA	= @INSTALL_DATA@
HACKDIR		= @HACKDIR@

X_CFLAGS	= @X_CFLAGS@
X_LIBS		= @X_LIBS@
X_PRE_LIBS	= @X_PRE_LIBS@
X_EXTRA_LIBS	= @X_EXTRA_LIBS@

HACK_LIBS	= $(LIBS) $(X_LIBS) $(X_PRE_LIBS) @GL_LIBS@ @HACK_LIBS@ \
		  -lXt -lX11 -lXext $(X_EXTRA_LIBS) -lm

HACK_SRC	= $(srcdir)/..
HACK_BIN	= ..
UTILS_SRC	= $(HACK_SRC)/../utils
UTILS_BIN	= $(HACK_BIN)/../utils

INCLUDES	= -I$(srcdir) -I$(UTILS_SRC) -I$(HACK_SRC) \
		  -I$(HACK_SRC)/.. @INCLUDES@

UTIL_SRCS	= $(UTILS_SRC)/colors.c $(UTILS_SRC)/hsv.c \
		  $(UTILS_SRC)/resources.c $(UTILS_SRC)/usleep.c \
		  $(UTILS_SRC)/visual.c $(UTILS_SRC)/yarandom.c
UTIL_OBJS	= $(UTILS_SRC)/colors.o $(UTILS_SRC)/hsv.o \
		  $(UTILS_SRC)/resources.o $(UTILS_SRC)/usleep.o \
		  $(UTILS_SRC)/visual.o $(UTILS_SRC)/yarandom.o

SRCS		= buildlwo.c cage.c gears.c moebius.c morph3d.c \
		  pipeobjs.c pipes.c rubik.c s1_1.c s1_2.c s1_3.c s1_4.c \
		  s1_5.c s1_6.c s1_b.c sproingies.c sproingiewrap.c stairs.c \
		  superquadrics.c xlock-gl.c

OBJS		= buildlwo.o cage.o gears.o moebius.o morph3d.o \
		  pipeobjs.o pipes.o rubik.o s1_1.o s1_2.o s1_3.o s1_4.o \
		  s1_5.o s1_6.o s1_b.o sproingies.o sproingiewrap.o stairs.o \
		  superquadrics.o xlock-gl.o

GL_EXES		= cage gears moebius pipes sproingies stairs superquadrics \
		  morph3d rubik
EXES		= @GL_EXES@

HACK_OBJS	= screenhack-gl.o xlock-gl.o $(HACK_BIN)/xlockmore.o \
		  $(UTILS_BIN)/resources.o $(UTILS_BIN)/visual.o \
		  $(UTILS_BIN)/usleep.o $(UTILS_BIN)/yarandom.o \
		  $(UTILS_BIN)/hsv.o $(UTILS_BIN)/colors.o

HDRS		= buildlwo.h e_textures.h
MEN		= 
EXTRAS		= README Makefile.in

TARFILES	= $(SRCS) $(HDRS) $(MEN) $(EXTRAS)


all: $(EXES)

install:   install-program   install-man
uninstall: uninstall-program uninstall-man

install-strip:
	$(MAKE) INSTALL_PROGRAM='$(INSTALL_PROGRAM) -s' install

install-program:
	@exes="$(EXES)" ;						\
	for program in $$exes; do					\
	  echo $(INSTALL_PROGRAM) $$program $(HACKDIR)/$$program ;	\
	  $(INSTALL_PROGRAM) $$program $(HACKDIR)/$$program ;		\
	done

install-man:
	@men="$(MEN)" ;							\
	for man in $$men; do						\
	  instname=`echo $$man | sed 's/\.man$$/\.$(mansuffix)/'` ;	\
	  echo $(INSTALL_DATA) $(srcdir)/$$man $(man1dir)/$$instname ;	\
	  $(INSTALL_DATA) $(srcdir)/$$man $(man1dir)/$$instname ;	\
	done

uninstall-program:
	@for program in $(EXES); do					\
	  echo rm -f $(HACKDIR)/$$program ;				\
	  rm -f $(HACKDIR)/$$program ;					\
	done

uninstall-man:
	@men="$(MEN)" ;							\
	for man in $$men; do						\
	  instname=`echo $$man | sed 's/\.man$$/\.$(mansuffix)/'` ;	\
	  echo rm -f $(man1dir)/$$instname ;				\
	  rm -f $(man1dir)/$$instname ;					\
	done

clean:
	-rm -f *.o a.out core $(EXES)

distclean: clean
	-rm -f Makefile *~ "#"*

# Adds all current dependencies to Makefile
depend:
	$(DEPEND) -s '# DO NOT DELETE: updated by make depend'		    \
	$(DEPEND_FLAGS) --						    \
	$(INCLUDES) $(DEFS) $(DEPEND_DEFINES) $(CFLAGS) $(X_CFLAGS) --	    \
	$(SRCS)

# Adds some dependencies to Makefile.in -- not totally accurate, but pretty
# close.  This excludes dependencies on files in /usr/include, etc.  It tries
# to include only dependencies on files which are themselves a part of this
# package.
distdepend:
	@echo updating dependencies in `pwd`/Makefile.in... ;		    \
	$(DEPEND) -w 0 -f - 						    \
	-s '# DO NOT DELETE: updated by make distdepend' $(DEPEND_FLAGS) -- \
	$(INCLUDES) $(DEFS) $(DEPEND_DEFINES) $(CFLAGS) $(X_CFLAGS) --	    \
	$(SRCS) | 							    \
	(								    \
	  awk '/^# .*Makefile.in ---/,/^# DO .*distdepend/' < Makefile.in ; \
	  sed -e 's@ \./@ @g;s@ /[^ ]*@@g;/^.*:$$/d'			    \
	      -e 's@\.\./\.\./utils@$$(UTILS_SRC)@g'			    \
	      -e 's@\.\./glx/@@g'					    \
	      -e 's@ \.\./@ $$(HACK_SRC)/@g'				    \
	      -e 's@ \([^$$]\)@ $$(srcdir)/\1@g'			    \
	      -e 's@ $$(srcdir)/\(.*config.h\)@ \1@g' ;			    \
	  echo ''							    \
	) > /tmp/distdepend.$$$$ &&					    \
	mv Makefile.in Makefile.in.bak &&				    \
	mv /tmp/distdepend.$$$$ Makefile.in

TAGS: tags
tags:
	find $(srcdir) -name '*.[chly]' -print | xargs etags -a

echo_tarfiles:
	@echo $(TARFILES)


# Rules for noticing when the objects from the utils directory are out of
# date with respect to their sources, and going and building them according
# to the rules in their own Makefile...
#
$(UTILS_BIN)/colors.o:		$(UTILS_SRC)/colors.c
$(UTILS_BIN)/hsv.o:		$(UTILS_SRC)/hsv.c
$(UTILS_BIN)/resources.o:	$(UTILS_SRC)/resources.c
$(UTILS_BIN)/usleep.o:		$(UTILS_SRC)/usleep.c
$(UTILS_BIN)/visual.o:		$(UTILS_SRC)/visual.c
$(UTILS_BIN)/yarandom.o:	$(UTILS_SRC)/yarandom.c

$(UTIL_OBJS):
	cd $(UTILS_BIN) ; \
	$(MAKE) $(@F) CC="$(CC)" CFLAGS="$(CFLAGS)" LDFLAGS="$(LDFLAGS)"

$(HACK_BIN)/xlockmore.o: $(HACK_SRC)/xlockmore.c
	cd $(HACK_BIN)  ; $(MAKE) $(@F) CC="$(CC)" CFLAGS="$(CFLAGS)"


# How we build object files in this directory.
.c.o:
	$(CC) -c $(INCLUDES) $(DEFS) $(CFLAGS) $(X_CFLAGS) $<

# These hacks use a slightly-differently-compiled variant of screenhack.c.
# This is how to make the the other .o file from it.
#
screenhack-gl.o: $(HACK_SRC)/screenhack.c
	$(CC) -o $@ -c $(INCLUDES) $(DEFS) $(CFLAGS) $(X_CFLAGS) \
	  -DXLOCKMORE  -DUSE_GL $(HACK_SRC)/screenhack.c

CC_HACK		= $(CC) $(LDFLAGS)

cage:		cage.o		$(HACK_OBJS)
	$(CC_HACK) -o $@ $@.o	$(HACK_OBJS) $(HACK_LIBS)

gears:		gears.o		$(HACK_OBJS)
	$(CC_HACK) -o $@ $@.o	$(HACK_OBJS) $(HACK_LIBS)

moebius:	moebius.o		$(HACK_OBJS)
	$(CC_HACK) -o $@ $@.o	$(HACK_OBJS) $(HACK_LIBS)

pipes:		pipes.o		$(HACK_OBJS) pipeobjs.o buildlwo.o
	$(CC_HACK) -o $@ $@.o	$(HACK_OBJS) pipeobjs.o buildlwo.o \
	  $(HACK_LIBS)

superquadrics:	superquadrics.o	$(HACK_OBJS)
	$(CC_HACK) -o $@ $@.o	$(HACK_OBJS) $(HACK_LIBS)

morph3d:	morph3d.o	$(HACK_OBJS)
	$(CC_HACK) -o $@ $@.o	$(HACK_OBJS) $(HACK_LIBS)

rubik:		rubik.o	$(HACK_OBJS)
	$(CC_HACK) -o $@ $@.o	$(HACK_OBJS) $(HACK_LIBS)

stairs:		stairs.o	$(HACK_OBJS)
	$(CC_HACK) -o $@ $@.o	$(HACK_OBJS) $(HACK_LIBS)

SPROINGIES = sproingiewrap.o buildlwo.o \
	     s1_1.o s1_2.o s1_3.o s1_4.o s1_5.o s1_6.o s1_b.o
sproingies: sproingies.o $(HACK_OBJS) $(SPROINGIES)
	$(CC_HACK) -o $@ $@.o	$(HACK_OBJS) $(SPROINGIES) $(HACK_LIBS)


##############################################################################
#
# DO NOT DELETE: updated by make distdepend

buildlwo.o: $(srcdir)/buildlwo.h
cage.o: $(HACK_SRC)/xlockmore.h
cage.o: $(HACK_SRC)/../config.h
cage.o: $(HACK_SRC)/xlockmoreI.h
cage.o: $(HACK_SRC)/screenhack.h
cage.o: $(UTILS_SRC)/yarandom.h
cage.o: $(UTILS_SRC)/usleep.h
cage.o: $(UTILS_SRC)/resources.h
cage.o: $(UTILS_SRC)/hsv.h
cage.o: $(UTILS_SRC)/colors.h
cage.o: $(UTILS_SRC)/grabscreen.h
cage.o: $(UTILS_SRC)/visual.h
cage.o: $(srcdir)/e_textures.h
gears.o: $(HACK_SRC)/xlockmore.h
gears.o: $(HACK_SRC)/../config.h
gears.o: $(HACK_SRC)/xlockmoreI.h
gears.o: $(HACK_SRC)/screenhack.h
gears.o: $(UTILS_SRC)/yarandom.h
gears.o: $(UTILS_SRC)/usleep.h
gears.o: $(UTILS_SRC)/resources.h
gears.o: $(UTILS_SRC)/hsv.h
gears.o: $(UTILS_SRC)/colors.h
gears.o: $(UTILS_SRC)/grabscreen.h
gears.o: $(UTILS_SRC)/visual.h
moebius.o: $(HACK_SRC)/xlockmore.h
moebius.o: $(HACK_SRC)/../config.h
moebius.o: $(HACK_SRC)/xlockmoreI.h
moebius.o: $(HACK_SRC)/screenhack.h
moebius.o: $(UTILS_SRC)/yarandom.h
moebius.o: $(UTILS_SRC)/usleep.h
moebius.o: $(UTILS_SRC)/resources.h
moebius.o: $(UTILS_SRC)/hsv.h
moebius.o: $(UTILS_SRC)/colors.h
moebius.o: $(UTILS_SRC)/grabscreen.h
moebius.o: $(UTILS_SRC)/visual.h
moebius.o: $(srcdir)/e_textures.h
morph3d.o: $(HACK_SRC)/xlockmore.h
morph3d.o: $(HACK_SRC)/../config.h
morph3d.o: $(HACK_SRC)/xlockmoreI.h
morph3d.o: $(HACK_SRC)/screenhack.h
morph3d.o: $(UTILS_SRC)/yarandom.h
morph3d.o: $(UTILS_SRC)/usleep.h
morph3d.o: $(UTILS_SRC)/resources.h
morph3d.o: $(UTILS_SRC)/hsv.h
morph3d.o: $(UTILS_SRC)/colors.h
morph3d.o: $(UTILS_SRC)/grabscreen.h
morph3d.o: $(UTILS_SRC)/visual.h
pipeobjs.o: $(srcdir)/buildlwo.h
pipes.o: $(HACK_SRC)/xlockmore.h
pipes.o: $(HACK_SRC)/../config.h
pipes.o: $(HACK_SRC)/xlockmoreI.h
pipes.o: $(HACK_SRC)/screenhack.h
pipes.o: $(UTILS_SRC)/yarandom.h
pipes.o: $(UTILS_SRC)/usleep.h
pipes.o: $(UTILS_SRC)/resources.h
pipes.o: $(UTILS_SRC)/hsv.h
pipes.o: $(UTILS_SRC)/colors.h
pipes.o: $(UTILS_SRC)/grabscreen.h
pipes.o: $(UTILS_SRC)/visual.h
pipes.o: $(srcdir)/buildlwo.h
rubik.o: $(HACK_SRC)/xlockmore.h
rubik.o: $(HACK_SRC)/../config.h
rubik.o: $(HACK_SRC)/xlockmoreI.h
rubik.o: $(HACK_SRC)/screenhack.h
rubik.o: $(UTILS_SRC)/yarandom.h
rubik.o: $(UTILS_SRC)/usleep.h
rubik.o: $(UTILS_SRC)/resources.h
rubik.o: $(UTILS_SRC)/hsv.h
rubik.o: $(UTILS_SRC)/colors.h
rubik.o: $(UTILS_SRC)/grabscreen.h
rubik.o: $(UTILS_SRC)/visual.h
s1_1.o: $(srcdir)/buildlwo.h
s1_2.o: $(srcdir)/buildlwo.h
s1_3.o: $(srcdir)/buildlwo.h
s1_4.o: $(srcdir)/buildlwo.h
s1_5.o: $(srcdir)/buildlwo.h
s1_6.o: $(srcdir)/buildlwo.h
s1_b.o: $(srcdir)/buildlwo.h
sproingies.o: $(HACK_SRC)/xlockmoreI.h
sproingies.o: $(HACK_SRC)/screenhack.h
sproingies.o: $(HACK_SRC)/../config.h
sproingies.o: $(UTILS_SRC)/yarandom.h
sproingies.o: $(UTILS_SRC)/usleep.h
sproingies.o: $(UTILS_SRC)/resources.h
sproingies.o: $(UTILS_SRC)/hsv.h
sproingies.o: $(UTILS_SRC)/colors.h
sproingies.o: $(UTILS_SRC)/grabscreen.h
sproingies.o: $(UTILS_SRC)/visual.h
sproingies.o: $(srcdir)/buildlwo.h
sproingiewrap.o: $(HACK_SRC)/xlockmore.h
sproingiewrap.o: $(HACK_SRC)/../config.h
sproingiewrap.o: $(HACK_SRC)/xlockmoreI.h
sproingiewrap.o: $(HACK_SRC)/screenhack.h
sproingiewrap.o: $(UTILS_SRC)/yarandom.h
sproingiewrap.o: $(UTILS_SRC)/usleep.h
sproingiewrap.o: $(UTILS_SRC)/resources.h
sproingiewrap.o: $(UTILS_SRC)/hsv.h
sproingiewrap.o: $(UTILS_SRC)/colors.h
sproingiewrap.o: $(UTILS_SRC)/grabscreen.h
sproingiewrap.o: $(UTILS_SRC)/visual.h
stairs.o: $(HACK_SRC)/xlockmore.h
stairs.o: $(HACK_SRC)/../config.h
stairs.o: $(HACK_SRC)/xlockmoreI.h
stairs.o: $(HACK_SRC)/screenhack.h
stairs.o: $(UTILS_SRC)/yarandom.h
stairs.o: $(UTILS_SRC)/usleep.h
stairs.o: $(UTILS_SRC)/resources.h
stairs.o: $(UTILS_SRC)/hsv.h
stairs.o: $(UTILS_SRC)/colors.h
stairs.o: $(UTILS_SRC)/grabscreen.h
stairs.o: $(UTILS_SRC)/visual.h
stairs.o: $(srcdir)/e_textures.h
superquadrics.o: $(HACK_SRC)/xlockmore.h
superquadrics.o: $(HACK_SRC)/../config.h
superquadrics.o: $(HACK_SRC)/xlockmoreI.h
superquadrics.o: $(HACK_SRC)/screenhack.h
superquadrics.o: $(UTILS_SRC)/yarandom.h
superquadrics.o: $(UTILS_SRC)/usleep.h
superquadrics.o: $(UTILS_SRC)/resources.h
superquadrics.o: $(UTILS_SRC)/hsv.h
superquadrics.o: $(UTILS_SRC)/colors.h
superquadrics.o: $(UTILS_SRC)/grabscreen.h
superquadrics.o: $(UTILS_SRC)/visual.h
xlock-gl.o: $(HACK_SRC)/screenhack.h
xlock-gl.o: $(HACK_SRC)/../config.h
xlock-gl.o: $(UTILS_SRC)/yarandom.h
xlock-gl.o: $(UTILS_SRC)/usleep.h
xlock-gl.o: $(UTILS_SRC)/resources.h
xlock-gl.o: $(UTILS_SRC)/hsv.h
xlock-gl.o: $(UTILS_SRC)/colors.h
xlock-gl.o: $(UTILS_SRC)/grabscreen.h
xlock-gl.o: $(UTILS_SRC)/visual.h
xlock-gl.o: $(HACK_SRC)/xlockmoreI.h

